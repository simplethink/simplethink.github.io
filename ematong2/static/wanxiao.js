function Wanxiao(){}Wanxiao.prototype.getToken=function(callback){if(!isIphone()){callback(window.wanxiao_authen.executeBindMethod("getToken",null))}else{var postJsonObject={"parCallBack":"wanxiao._getTokenCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getTokenCallback=callback;window.webkit.messageHandlers.getToken.postMessage(postParams)}};Wanxiao.prototype.getUserJsonValue=function(callback){if(!isIphone()){callback(window.wanxiao_authen.executeBindMethod("getUserJsonValue",null))}else{var postJsonObject={"parCallBack":"wanxiao._getUserJsonValueCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getUserJsonValueCallback=callback;window.webkit.messageHandlers.getUserJsonValue.postMessage(postParams)}};Wanxiao.prototype.sendRemoteNotification=function(jsondata,callback){if(!isIphone()){callback(window.wanxiao_push.executeBindMethod("sendRemoteNotification",jsondata))}else{var postJsonObject={"parCallBack":"wanxiao._sendRemoteNotificationCallback","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._sendRemoteNotificationCallback=callback;window.webkit.messageHandlers.sendRemoteNotification.postMessage(postParams)}};Wanxiao.prototype.openCamera=function(jsondata){if(!isIphone()){window.wanxiao_camera.executeBindMethod("getCameraPhoto",jsondata)}else{var postJsonObject={"parCallBack":"wanxiao.cameraPhotoCallBack","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.openCamera.postMessage(postParams)}};Wanxiao.prototype.cameraPhotoCallBack=function(photoBase64Str){};Wanxiao.prototype.shareTo=function(type,text,imagesJson,url,title,bbscontent,shareTo,linkType){var JsonObject={"type":type,"text":text,"images":imagesJson,"url":url,"title":title,"bbsContent":bbscontent,"linkUrl":url,"shareTo":shareTo,"linkType":linkType};var params=JSON.stringify(JsonObject);if(!isIphone()){window.wanxiao_share.executeBindMethod("shareTo",params)}else{var postJsonObject={"parCallBack":"","parValue":params};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.shareTo.postMessage(postParams)}};Wanxiao.prototype.shareImage=function(shareTo,image,callback){var JsonObject={"shareTo":shareTo,"image":image,"callback":"wanxiao._shareImage"};var params=JSON.stringify(JsonObject);if(!isIphone()){Wanxiao.prototype._shareImage=callback;window.wanxiao_shareImage.executeBindMethod("shareImage",params)}else{var postJsonObject={"parCallBack":"wanxiao._shareImageCallback","parValue":params};Wanxiao.prototype._shareImageCallback=callback;var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.shareImage.postMessage(postParams)}};Wanxiao.prototype.getCredits=function(jsondata,callback){if(!isIphone()){callback(window.wanxiao_credits.executeBindMethod("getCredits",jsondata))}else{var postJsonObject={"parCallBack":"wanxiao._getCreditsCallback","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getCreditsCallback=callback;window.webkit.messageHandlers.getCredits.postMessage(postParams)}};Wanxiao.prototype.addCredits=function(jsondata,callback){if(!isIphone()){callback(window.wanxiao_credits.executeBindMethod("addCredits",jsondata))}else{var postJsonObject={"parCallBack":"wanxiao._addCreditsCallback","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._addCreditsCallback=callback;window.webkit.messageHandlers.addCredits.postMessage(postParams)}};Wanxiao.prototype.reduceCredits=function(jsondata,callback){if(!isIphone()){callback(window.wanxiao_credits.executeBindMethod("reduceCredits",jsondata))}else{var postJsonObject={"parCallBack":"wanxiao._reduceCreditsCallback","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._reduceCreditsCallback=callback;window.webkit.messageHandlers.reduceCredits.postMessage(postParams)}};Wanxiao.prototype.openChat=function(toId,fromId,sign,flag,callback){var JsonObject={"toId":toId,"fromId":fromId,"sign":sign,"flag":flag};var params=JSON.stringify(JsonObject);if(!isIphone()){callback(window.wanxiao_chat.executeBindMethod("getChat",params))}else{var postJsonObject={"parCallBack":"wanxiao._openChatCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._openChatCallback=callback;window.webkit.messageHandlers.openChat.postMessage(postParams)}};Wanxiao.prototype.openPayWay=function(order_param,callback){var JsonObject={"order_param":order_param};var params=JSON.stringify(JsonObject);if(!isIphone()){callback(window.wanxiao_payway.executeBindMethod("getPayWay",params))}else{var postJsonObject={"parCallBack":"wanxiao._openPayWayCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._openPayWayCallback=callback;window.webkit.messageHandlers.openPayWay.postMessage(postParams)}};Wanxiao.prototype.closeAppWeb=function(){if(!isIphone()){window.wanxiao_default.executeBindMethod("closeActivity",null)
}else{var postJsonObject={"parCallBack":"","parValue":""};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.closeAppWeb.postMessage(postParams)}};Wanxiao.prototype.setMenu=function(jsonStr,callback){if(!isIphone()){callback(window.wanxiao_menu.executeBindMethod("setMenu",jsonStr))}else{var postJsonObject={"parCallBack":"wanxiao._setMenuCallback","parValue":jsonStr};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._setMenuCallback=callback;window.webkit.messageHandlers.setMenu.postMessage(postParams)}};Wanxiao.prototype.scanBarcode=function(callback,jsonStr){if(!isIphone()){if(Version(NCPVersion(),"4.3.9")){var postJsonObject={"parCallBack":"wanxiao._scanBarcodeCallback","parValue":jsonStr};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._scanBarcodeCallback=callback;window.wanxiao_scanBarcode.executeBindMethod("scanBarcode",postParams)}else{Wanxiao.prototype._scanBarcodeCallback=callback;window.wanxiao_scanBarcode.executeBindMethod("scanBarcode","wanxiao._scanBarcodeCallback")}}else{var postJsonObject={"parCallBack":"wanxiao._scanBarcodeCallback","parValue":jsonStr};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._scanBarcodeCallback=callback;window.webkit.messageHandlers.scanBarcode.postMessage(postParams)}};Wanxiao.prototype.shake=function(callback){if(!isIphone()){Wanxiao.prototype._shakeCallback=callback;window.wanxiao_shake.executeBindMethod("shake","wanxiao._shakeCallback")}else{var postJsonObject={"parCallBack":"wanxiao._shakeCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._shakeCallback=callback;window.webkit.messageHandlers.shake.postMessage(postParams)}};Wanxiao.prototype.getLocation=function(callback){if(!isIphone()){console.log("-----getLocaltionPosition----");Wanxiao.prototype._locationCallback=callback;window.wanxiao_Location.executeBindMethod("getLocaltionPosition","wanxiao._locationCallback")}else{var postJsonObject={"parCallBack":"wanxiao._getLocationCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getLocationCallback=callback;window.webkit.messageHandlers.getLocation.postMessage(postParams)}};Wanxiao.prototype.appChannel=function(method,jsonData,callback){if(!isIphone()){var JsonObject={"command":method,"data":jsonData};var params=JSON.stringify(JsonObject);callback(window.wanxiao_command.executeBindMethod("appchannel",params))}else{var postJsonObject={"parCallBack":"wanxiao._appChannelCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._appChannelCallback=callback;window.webkit.messageHandlers.appChannel.postMessage(postParams)}};Wanxiao.prototype.getUserGravatar=function(callback){wanxiao.getUserJsonValue(function(result){if(result==null||result==undefined||result==""){callback("")}else{var d=eval("("+result+")");var url="http://server.17wanxiao.com/campus/~/userPic/"+d.id;callback(url)}})};Wanxiao.prototype.openImageView=function(imageUrls,index,callback){var JsonObject={"urls":imageUrls,"index":index};var params=JSON.stringify(JsonObject);if(!isIphone()){callback(window.wanxiao_imageView.executeBindMethod("imageView",params))}else{var postJsonObject={"parCallBack":"wanxiao._openImageViewCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._openImageViewCallback=callback;window.webkit.messageHandlers.openImageView.postMessage(postParams)}};Wanxiao.prototype.getNetworkStatus=function(callback){if(!isIphone()){callback(window.wanxiao_network.executeBindMethod("getNetwrokStatus",null))}else{var postJsonObject={"parCallBack":"wanxiao._getNetworkStatusCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getNetworkStatusCallback=callback;window.webkit.messageHandlers.getNetworkStatus.postMessage(postParams)}};Wanxiao.prototype.selectImage=function(callback){if(!isIphone()){Wanxiao.prototype._selectImageCallback=callback;window.wanxiao_selectImage.executeBindMethod("selectImage","wanxiao._selectImageCallback")}else{var postJsonObject={"parCallBack":"wanxiao._selectImageCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._selectImageCallback=callback;window.webkit.messageHandlers.selectImage.postMessage(postParams)}};Wanxiao.prototype.selectImage1=function(jsondata,callback){if(!isIphone()){Wanxiao.prototype._selectImage1Callback=callback;window.wanxiao_selectImage1.executeBindMethod("selectImage1",jsondata)}else{var postJsonObject={"parCallBack":"wanxiao._selectImage1Callback","parValue":jsondata};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._selectImage1Callback=callback;window.webkit.messageHandlers.selectImage1.postMessage(postParams)}};Wanxiao.prototype.setTitle=function(title,callback){var JsonObject={"title":title};var params=JSON.stringify(JsonObject);if(!isIphone()){window.wanxiao_title.executeBindMethod("setTitle",title)}else{var postJsonObject={"parCallBack":"wanxiao._setTitleCallback","parValue":params};
var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._setTitleCallback=callback;window.webkit.messageHandlers.setTitle.postMessage(postParams)}};Wanxiao.prototype.commonCallback=function(callback){if(!isIphone()){Wanxiao.prototype._commonCallback=callback;window.wanxiao_callback.executeBindMethod("commonCallback","wanxiao._commonCallback")}else{var postJsonObject={"parCallBack":"wanxiao._commonCallback","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._commonCallback=callback;window.webkit.messageHandlers.commonCallback.postMessage(postParams)}};Wanxiao.prototype.setMenu1=function(jsonData,callback){var params=JSON.stringify(jsonData);if(!isIphone()){Wanxiao.prototype._setMenu1=callback;window.wanxiao_menu1.executeBindMethod("setMenu1",params)}else{var postJsonObject={"parCallBack":"wanxiao._setMenu1Callback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._setMenu1Callback=callback;window.webkit.messageHandlers.setMenu1.postMessage(postParams)}};Wanxiao.prototype.showMenu=function(){if(!isIphone()){window.wanxiao_menu.executeBindMethod("showMenu",null)}else{var postJsonObject={"parCallBack":"","parValue":""};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.showMenu.postMessage(postParams)}};Wanxiao.prototype.hideMenu=function(){if(!isIphone()){window.wanxiao_menu.executeBindMethod("hideMenu",null)}else{var postJsonObject={"parCallBack":"","parValue":""};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.hideMenu.postMessage(postParams)}};Wanxiao.prototype.setConfig=function(key,value){var params_obj={"key":key,"value":value};var params=JSON.stringify(params_obj);if(!isIphone()){window.wanxiao_config.executeBindMethod("setConfig",params)}else{var postJsonObject={"parCallBack":"","parValue":params};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.setConfig.postMessage(postParams)}};Wanxiao.prototype.getConfig=function(key,callback){var params_obj={"key":key};var params=JSON.stringify(params_obj);if(!isIphone()){Wanxiao.prototype._getConfig=callback;window.wanxiao_config.executeBindMethod("getConfig",params)}else{var postJsonObject={"parCallBack":"wanxiao._getConfigCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getConfigCallback=callback;window.webkit.messageHandlers.getConfig.postMessage(postParams)}};Wanxiao.prototype.NCPStartTalkFun=function(type,access_token,playbackID){var params_obj={"type":type,"data":{"access_token":access_token,"playbackID":playbackID}};var params=JSON.stringify(params_obj);if(isIphone()){var postJsonObject={"parCallBack":"","parValue":params};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.NCPStartTalkFun.postMessage(postParams)}};Wanxiao.prototype.getDeviceInfo=function(callback){if(!isIphone()){Wanxiao.prototype._getDeviceInfo=callback;window.wanxiao_getDeviceInfo.executeBindMethod("getDeviceInfo","wanxiao._getDeviceInfo")}else{var postJsonObject={"parCallBack":"wanxiao._getDeviceInfo","parValue":""};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._getDeviceInfo=callback;window.webkit.messageHandlers.getDeviceInfo.postMessage(postParams)}};Wanxiao.prototype.setNavbarColor=function(color,navbarType,callback){var params_obj={"color":color,"navbarType":navbarType};var params=JSON.stringify(params_obj);if(!isIphone()){Wanxiao.prototype._setNavbarColor=callback;window.wanxiao_navbar.executeBindMethod("setNavbarColor",params)}else{var postJsonObject={"parCallBack":"wanxiao._setNavbarColorCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._setNavbarColorCallback=callback;window.webkit.messageHandlers.setNavbarColor.postMessage(postParams)}};Wanxiao.prototype.setKeyboard=function(operationState,maxInput,callback){var params_obj={"operationState":operationState,"maxInput":maxInput};var params=JSON.stringify(params_obj);if(!isIphone()){Wanxiao.prototype._setKeyboard=callback;window.wanxiao_setKeyboard.executeBindMethod("setKeyboard",params)}else{var postJsonObject={"parCallBack":"wanxiao._setKeyboardCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._setKeyboardCallback=callback;window.webkit.messageHandlers.setKeyboard.postMessage(postParams)}};Wanxiao.prototype.openNewWebview=function(url,type,NCPNavBarState){var params_obj={"url":url,"type":type,"NCPNavBarState":NCPNavBarState};var params=JSON.stringify(params_obj);if(!isIphone()){window.wanxiao_openNewWebview.executeBindMethod("openNewWebview",params)}else{var postJsonObject={"parCallBack":"","parValue":params};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.openNewWebview.postMessage(postParams)}};Wanxiao.prototype.eventDriven=function(eventTag,dataInfo,callback){var JsonObject={"eventTag":eventTag,"dataInfo":dataInfo,"callback":"wanxiao._eventDriven"};var params=JSON.stringify(JsonObject);
if(!isIphone()){Wanxiao.prototype._eventDriven=callback;window.wanxiao_eventDriven.executeBindMethod("eventDriven",params)}else{var postJsonObject={"parCallBack":"wanxiao._eventDrivenCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._eventDrivenCallback=callback;window.webkit.messageHandlers.eventDriven.postMessage(postParams)}};Wanxiao.prototype.saveImgInfo=function(dataInfo,callback){var JsonObject={"dataInfo":dataInfo,"callback":"wanxiao._saveImgInfo"};var params=JSON.stringify(JsonObject);Wanxiao.prototype._saveImgInfo=callback;if(!isIphone()){window.wanxiao_saveImgInfo.executeBindMethod("saveImgInfo",params)}else{var postJsonObject={"parCallBack":"wanxiao._saveImgInfo","parValue":params};var postParams=JSON.stringify(postJsonObject);window.webkit.messageHandlers.saveImgInfo.postMessage(postParams)}};Wanxiao.prototype.recordEventDriven=function(recordEventTag,dataInfo,callback){var JsonObject={"recordEventTag":recordEventTag,"dataInfo":dataInfo,"callback":"wanxiao._recordEventDriven"};var params=JSON.stringify(JsonObject);if(!isIphone()){Wanxiao.prototype._recordEventDriven=callback;window.wanxiao_recordEventDriven.executeBindMethod("recordEventDriven",params)}else{var postJsonObject={"parCallBack":"wanxiao._recordEventDrivenCallback","parValue":params};var postParams=JSON.stringify(postJsonObject);Wanxiao.prototype._recordEventDrivenCallback=callback;window.webkit.messageHandlers.recordEventDriven.postMessage(postParams)}};var wanxiao=new Wanxiao();var browser={versions:function(){var u=navigator.userAgent,app=navigator.appVersion;return{trident:u.indexOf("Trident")>-1,presto:u.indexOf("Presto")>-1,webKit:u.indexOf("AppleWebKit")>-1,gecko:u.indexOf("Gecko")>-1&&u.indexOf("KHTML")==-1,mobile:!!u.match(/AppleWebKit.*Mobile.*/)||!!u.match(/AppleWebKit/),ios:!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:u.indexOf("Android")>-1||u.indexOf("Linux")>-1,iPhone:u.indexOf("iPhone")>-1||u.indexOf("Mac")>-1,iPad:u.indexOf("iPad")>-1,webApp:u.indexOf("Safari")==-1,wanxiao:u.match(/Wanxiao\/([\d\.]+)/i)?u.match(/Wanxiao\/([\d\.]+)/i):"0.0.0"}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};function isIphone(){if(browser.versions.ios||browser.versions.iPhone||browser.versions.iPad){return true}else{return false}}function NCPVersion(){return browser.versions.wanxiao[1]}function Version(curV,reqV){var arr1=curV.split(".");var arr2=reqV.split(".");var minL=Math.min(arr1.length,arr2.length);var pos=0;var diff=0;while(pos<minL){diff=parseInt(arr1[pos])-parseInt(arr2[pos]);if(diff!=0){break}pos++}if(diff>0){return true}else{if(diff==0){return false}else{return false}}};