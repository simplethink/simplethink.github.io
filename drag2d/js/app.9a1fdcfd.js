(function(t){function e(e){for(var n,l,o=e[0],r=e[1],c=e[2],d=0,p=[];d<o.length;d++)l=o[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&p.push(i[l][0]),i[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var r=s[o];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=l(l.s=s[0]))}return t}var n={},i={app:0},a=[];function l(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=t,l.c=n,l.d=function(t,e,s){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(s,n,function(e){return t[e]}.bind(null,n));return s},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=r;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0354":function(t,e,s){},1905:function(t,e,s){"use strict";s("38e3")},"38e3":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var n=s("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},a=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("el-button-group",{staticClass:"save"},[e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.list=[{name:"new",id:0,css:"",tasks:[]}]}}},[t._v("清空")]),e("el-button",{attrs:{type:"primary"},on:{click:t.undo}},[t._v("撤销")]),e("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:t.input}},[t._v(" 输入 "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.m,(function(s,n){return e("el-dropdown-item",{key:n,nativeOn:{click:function(e){t.list=s}}},[t._v(t._s(t.toDate(n)))])})),1)],1),e("el-button",{staticClass:"save output",attrs:{type:"primary"},on:{click:t.output}},[t._v("导出")])],1),e("div",{staticClass:"col-8",attrs:{id:"col-8"}},[e("h3",[t._v("Nested draggable")]),e("nested-draggable",{staticStyle:{width:"375px",position:"relative",margin:"auto",border:"3px solid black"},attrs:{tasks:t.list}})],1),e("div",{staticClass:"col-9"},[e("div",[e("el-button",{attrs:{type:""},on:{click:function(e){t.showMenu=!t.showMenu}}},[t._v(" 展开/收起 ")]),t.showMenu?e("el-menu",{attrs:{"default-active":"0"},on:{select:t.menuSelect,close:t.menuSelect}},t._l(t.list,(function(t,s){return e("mymenu",{key:s,attrs:{item:t}})})),1):t._e()],1),e("myform",{attrs:{selTask:t.selTask},on:{changeForm:t.changeForm}})],1)],1)},o=[],r=(s("13d5"),s("ade3"));s("14d9");const c={width:{"100%":"","40px":"","fit-content":""},height:{"100%":"",auto:""},margin:{auto:"",unset:""},position:{absolute:[{left:{0:""}},{right:{0:""}},{top:{0:""}},{bottom:{0:""}}],relative:""},display:{block:[],flex:[{"flex-direction":{row:"",column:""}},{"justify-content":{normal:"",center:"","flex-start":"","flex-end":"","space-around":"","space-between":"","space-evenly":""}},{"align-items":{normal:"",center:"","flex-start":"","flex-end":""}},{"flex-wrap":{nowrap:"",wrap:""}},{"align-content":{normal:"",center:"","flex-start":"","flex-end":"","space-around":"","space-between":""}}]}};var u;class d{constructor(){}static findNodeById(t,e){if(!t)return!1;for(let s=0;s<t.length;s++){const n=t[s];if(n.id==e)return n;if(n.tasks&&n.tasks.length>0){const t=this.findNodeById(n.tasks,e);if(t)return t}}return!1}static getCache(t){if(t=t||"dragh5",localStorage.getItem(t)){let e=JSON.parse(localStorage.getItem(t));return e}return!1}static setCacheTemp(t,e){if(e||(e=t,t="tempHD"),localStorage.getItem(t)){let s=JSON.parse(localStorage.getItem(t));s.unshift(e),localStorage.setItem(t,JSON.stringify(s))}else localStorage.setItem(t,JSON.stringify([e]))}static setCache(t,e){if(e||(e=t,t="dragh5"),e={["ver"+Date.now()]:e},localStorage.getItem(t)){let s=JSON.parse(localStorage.getItem(t));s={...s,...e},localStorage.setItem(t,JSON.stringify(s))}else localStorage.setItem(t,JSON.stringify(e))}}u=d,Object(r["a"])(d,"eventbus",new n["default"]),Object(r["a"])(d,"objectToStyleString",t=>{let e="";for(let s in t)if(t.hasOwnProperty(s)){let n=t[s];e+=s+": "+n+";\n"}return e.trim()}),Object(r["a"])(d,"cssToJs",t=>{for(var e=t.split(";"),s={},n=0;n<e.length;n++){var i=e[n].trim();if(""!==i){var a=i.split(":"),l=a[0].trim(),o=a[1].trim();s[l]=o}}return s}),Object(r["a"])(d,"traverseObject",(function(t,e,s){t||(t=c);for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];if(Array.isArray(i)){if(s!=n)continue;i.forEach(t=>{u.traverseObject.call(this,t,e)})}else"object"===typeof i&&null!==i&&(e.push({key:n,value:Object.keys(i)}),u.traverseObject.call(this,i,e,this.form[n]))}})),Object(r["a"])(d,"findAndDoThings",(function(t,e,s){function n(t,i,a){if(t.id===e)return s(t,i,a),!0;if(t.tasks)for(let e=0;e<t.tasks.length;e++)if(n(t.tasks[e],t.tasks,e))return!0;return!1}function i(t){return JSON.parse(JSON.stringify(t))}return t=i(t),n(t,null,null),t})),Object(r["a"])(d,"onlyForeach",(function(t,e){function s(t,n,i){if(e(t,n,i),t.tasks)for(let e=0;e<t.tasks.length;e++)if(s(t.tasks[e],t.tasks,e))return!0;return!1}function n(t){return JSON.parse(JSON.stringify(t))}return t=n(t),s(t,null,null),t})),Object(r["a"])(d,"objectReduce",(function(t){function e(t){let s="",n="";if(t.tasks){for(let s=0;s<t.tasks.length;s++)n+=e(t.tasks[s]);s=`<${t.tag||"div"} class='c${t.id}'> ${t.name+n}</${t.tag||"div"}>`}else console.log("没有tasks，list格式有问题");return s}function s(t){return JSON.parse(JSON.stringify(t))}return t=s(t),e(t,null,null)})),Object(r["a"])(d,"findAndCopyNode",(function(t,e){function s(t){if("object"!==typeof t||null===t)return t;let e=Array.isArray(t)?[]:{};for(let n in t)t.hasOwnProperty(n)&&(e[n]=s(t[n]));return e.hasOwnProperty("id")&&(e.id=Date.now()+Math.random().toString(10).substr(-2)),e}return t=u.findAndDoThings(t,e,(t,e,n)=>{const i=s(t);e.splice(n+1,0,i)}),t})),Object(r["a"])(d,"findAndCssIt",(function(t,e,s){return t=u.findAndDoThings(t,e,t=>{t.name=s.name,t.css=s.css}),t})),Object(r["a"])(d,"findAndAppend",(function(t,e){return t=u.findAndDoThings(t,e,t=>{t.tasks.push({name:"new",id:Date.now(),css:"",tasks:[]})}),t})),Object(r["a"])(d,"findAndDelIt",(function(t,e){return t=u.findAndDoThings(t,e,(t,e,s)=>{e.splice(s,1)}),t}));var p=function(){var t=this,e=t._self._c;return e("draggable",{staticClass:"dragArea",attrs:{tag:t.$attrs.item&&t.$attrs.item.tag||"div","chosen-class":"chosen",list:t.tasks,group:{name:"g1"}}},[t._v(" "+t._s(t.$attrs.text)+" "),t._l(t.tasks,(function(n){return e("nested-draggable",{key:n.id,class:"c"+n.id,style:n.css,attrs:{item:n,tasks:n.tasks,src:s("d8cc"),text:n.name},nativeOn:{click:function(e){return e.stopPropagation(),t.selOne(n.id)},dblclick:function(e){return e.stopPropagation(),t.handleDBC(n)},contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.handleContextMenu(e,n)}}})}))],2)},m=[],f=s("b76a"),h=s.n(f),g=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"提示","append-to-body":"",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-button",{attrs:{type:"danger"},on:{click:t.delItem}},[t._v("删 除")]),e("el-button",{on:{click:t.appendChild}},[t._v("生蛋")]),e("el-button",{attrs:{type:"warn"},on:{click:t.copyEle}},[t._v("复制")]),e("el-input",{attrs:{placeholder:"输入文本"},model:{value:t.txtVal,callback:function(e){t.txtVal=e},expression:"txtVal"}}),e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:14},placeholder:""},model:{value:t.cssVal,callback:function(e){t.cssVal=e},expression:"cssVal"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.cmtCss}},[t._v("确 定")])],1)],1)],1)},b=[],y={data(){return{cssVal:"",txtVal:"",item:{},dialogVisible:!1}},methods:{appendChild(){this.dialogVisible=!1,d.eventbus.$emit("appendChild",{id:this.item.id})},delItem(){this.$alert("确认删除？").then(()=>{this.dialogVisible=!1,d.eventbus.$emit("delItem",{id:this.item.id})})},cmtCss(){this.dialogVisible=!1;let t=d.objectToStyleString({...d.cssToJs(this.cssVal)});d.eventbus.$emit("commit",{id:this.item.id,css:t,name:this.txtVal})},copyEle(){d.eventbus.$emit("复制",this.item.id)}}},v=y,k=s("2877"),O=Object(k["a"])(v,g,b,!1,null,null,null),x=O.exports;const w=n["default"].extend(x);let j;var _={open(t){j||(j=new w({el:document.createElement("div")})),j.dialogVisible||(document.body.appendChild(j.$el),n["default"].nextTick(()=>{j.dialogVisible=!0,j.cssVal=t.css,j.txtVal=t.name,j.item=t}))},close(){j&&(j.dialogVisible=!1)}},S={props:{tasks:{required:!0,type:Array}},data(){return{cssVal:"",txtVal:"",item:{},dialogVisible:!1}},components:{draggable:h.a},methods:{selOne(t){this.dialogVisible=!1,d.eventbus.$emit("selOne",t)},handleDBC(t){_.open(t)},handleContextMenu(...t){console.log(t,"Right-click event triggered"),d.eventbus.$emit("复制",t[1].id)}},name:"nested-draggable"},$=S,C=(s("7779"),Object(k["a"])($,p,m,!1,null,null,null)),T=C.exports,I=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",size:"mini"}},[t._v(" "+t._s("id:"+t.selTask.id)+" "),e("el-form-item",{attrs:{label:"tag"}},[e("el-radio-group",{model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}},[e("el-radio",{attrs:{label:"img"}}),e("el-radio",{attrs:{label:"div"}}),e("el-radio",{attrs:{label:"span"}})],1)],1),t._l(t.arr,(function(s,n){return e("el-form-item",{key:n,attrs:{label:s.key}},[e("el-radio-group",{model:{value:t.form[s.key],callback:function(e){t.$set(t.form,s.key,e)},expression:"form[i.key]"}},t._l(s.value,(function(t){return e("el-radio",{key:t,attrs:{label:t}})})),1)],1)})),e("pre",{domProps:{innerHTML:t._s(t.selTask.css)},on:{dblclick:t.handleDB}})],2)],1)},V=[];let J=()=>{};var D={data(){return{tag:"div",form:{}}},methods:{handleDB(){_.open(this.selTask)},init(){this.selTask&&(J(),this.form=d.cssToJs(this.selTask.css),J=this.$watch("form",(function(t){this.$emit("changeForm",{css:t}),console.log(1111111)}),{deep:!0}),this.tag=this.selTask.tag||"div")}},computed:{arr(){let t=[];return d.traverseObject.call(this,null,t,this.form.display),t}},watch:{selTask(){this.init()},tag(t){this.$emit("changeForm",{tag:t})}},props:{selTask:{required:!0,type:[Object,Boolean]}}},A=D,N=Object(k["a"])(A,I,V,!1,null,null,null),P=N.exports,M=s("be92");const E=Object(M["c"])("counter",{state:()=>{const t=d.getCache();return console.log(t),{count:t}},actions:{increment(){this.count++},decrement(){this.count--}}}),B=[{name:"task 1",id:0,css:"",tasks:[{name:"task 2",id:1,css:"",tasks:[]}]},{name:"task 3",id:2,css:"",tasks:[{name:"task 4",id:3,css:"",tasks:[]}]},{name:"task 5",id:4,css:"",tasks:[]}];var F=function(){var t=this,e=t._self._c;return 0==t.$attrs.item.tasks.length?e("el-menu-item",{attrs:{index:t.$attrs.item.id+""},nativeOn:{mouseover:function(e){return t.showthing.apply(null,arguments)}}},[t._v(t._s(t.$attrs.item.id))]):e("el-submenu",{attrs:{index:t.$attrs.item.id+""}},[e("template",{slot:"title"},[t._v(t._s(t.$attrs.item.id))]),t._l(t.$attrs.item.tasks,(function(t,s){return e("mymenu",{key:s,attrs:{item:t}})}))],2)},H=[],R={name:"mymenu",methods:{showthing(){console.log(1111111111)}}},q=R,L=(s("570e"),Object(k["a"])(q,F,H,!1,null,null,null)),W=L.exports,z={name:"nested-example",display:"Nested",order:15,components:{myform:P,nestedDraggable:T,Mymenu:W},created(){this.list=this.m[Object.keys(this.m).slice(-1)],d.eventbus.$on("appendChild",t=>{let e=d.findAndAppend({id:-1,tasks:[...this.list]},t.id);console.log(e),this.list=e.tasks}),d.eventbus.$on("selOne",t=>{this.selIndex=t}),d.eventbus.$on("delItem",t=>{let e=d.findAndDelIt({id:-1,tasks:[...this.list]},t.id);console.log(e),this.list=e.tasks}),d.eventbus.$on("复制",t=>{let e=d.findAndCopyNode({id:-1,tasks:[...this.list]},t);this.list=e.tasks,console.log(e)}),d.eventbus.$on("commit",t=>{console.log(this.list),this.list=d.findAndCssIt({id:-1,tasks:[...this.list]},t.id,t).tasks,d.setCacheTemp(this.list)})},computed:{...Object(M["e"])(E,{m:"count"}),selTask(){return d.findNodeById(this.list,this.selIndex)}},methods:{undo(){let t=d.getCache("tempHD");this.list=t.pop()},menuSelect(t){let e=document.querySelector(".c"+t).classList;e.add("border-animation"),setTimeout(()=>{e.remove("border-animation")},2e3),this.selIndex=t},toDate(t){return new Date(t.substr(3)-0).toString().substr(4,14)},...Object(M["d"])(E,{moar:"increment",setIt:"setCount"}),handleCommand(t,e){this.$message("click on item "+t+e)},input(){this.$prompt("nothing",{inputType:"textarea",closeOnPressEscape:!0,inputValue:JSON.stringify(this.m[Object.keys(this.m).slice(-1)])}).then(({value:t})=>{this.list=JSON.parse(t)})},output(){let t={};d.onlyForeach({id:-1,tasks:[...this.list]},e=>{t[e.id]=e.css});let e=Object.keys(t).reduce((e,s)=>t[s]?e+`.c${s}{${t[s]}}`:e,"");e=`<style>${e}</style>`,console.log(e,d.objectReduce({id:-1,tasks:[...this.list]}))},save(){let t=this;d.setCache(this.list),function(e){document.oncopy=function(s){s.clipboardData.setData("text",e);const n=t.$createElement;t.$notify({title:"标题名称",message:n("i",{style:"color: teal"},"已复制到剪切板。")}),s.preventDefault(),document.oncopy=null}}(JSON.stringify(t.list)),document.execCommand("Copy")},changeForm({css:t,tag:e}){let s=this.selTask;s&&(t&&(s.css=d.objectToStyleString({...d.cssToJs(s.css),...t})),e&&(s.tag=e),this.list=[...this.list],d.setCacheTemp(this.list))}},data(){return{showMenu:!1,selIndex:0,history:[],list:B}}},Y=z,G=(s("1905"),Object(k["a"])(Y,l,o,!1,null,null,null)),K=G.exports,Q=s("5c96"),U=s.n(Q);s("0fae");n["default"].use(U.a);var X={name:"App",data(){return{enabled:!0,list:[{name:"John",id:0},{name:"Joao",id:1},{name:"Jean",id:2}],dragging:!1}},mounted(){document.addEventListener("keydown",(function(t){"Escape"===t.key&&console.log("ESC键被按下了！")}))},methods:{checkMove:function(t){window.console.log("Future index: "+t.draggedContext.futureIndex)}},components:{HelloWorld:K}},Z=X,tt=(s("d92b"),Object(k["a"])(Z,i,a,!1,null,null,null)),et=tt.exports;n["default"].config.productionTip=!1,n["default"].use(M["a"]);const st=Object(M["b"])();new n["default"]({pinia:st,render:t=>t(et)}).$mount("#app")},"570e":function(t,e,s){"use strict";s("7c59")},7779:function(t,e,s){"use strict";s("fab9")},"7c59":function(t,e,s){},d8cc:function(t,e,s){t.exports=s.p+"img/ab.00d558b5.png"},d92b:function(t,e,s){"use strict";s("0354")},fab9:function(t,e,s){}});
//# sourceMappingURL=app.9a1fdcfd.js.map